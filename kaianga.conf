# -*- mode: toml -*-

# Kianga config file

[packages]
    [[packages.scripts]]
        root = true
        script= "bin/packages"

[emacs-font]
    pre-req = "packages.scripts"
    [[emacs-font.scripts]]
        root = true
        script = "bin/get-install-spacemacs-font"

# [setup-user]
# if user doesn't exist then do it.

# [install supervisor]
# as root

# Use Https repo names but we'll set the GH config to change
# urls to SSH after initial pull 
[pull-repos]
    pre-req = "packages.scripts" 

    [pull-repos.dotfiles]
        branch = "master"
        local = "~/dotfiles"
        remote = "origin"
        url = "git@github.com:sierra-alpha/dotfiles.git"
        watch = true

    [pull-repos.matapihi]
        branch = "master"
        local = "~/dev/matapihi"
        remote = "origin"
        url = "git@github.com:sierra-alpha/kaianga.git"
        watch = true

    [pull-repos.kaianga]
        branch = "master"
        local = "~/dev/kaianga"
        remote = "origin"
        url = "git@github.com:sierra-alpha/kaianga.git"
        watch = true

    [pull-repos.custom_scripts]
        branch = "master"
        local = "~/bin"
        remote = "origin"
        url = "git@github.com:sierra-alpha/kaianga.git"
        watch = true

     [pull-repos.gitwatch]
        local = "~/src"
        url = "https://github.com/gitwatch/gitwatch.git"

[stow-dotties]
    pre-req = "pull-repos.dotfiles"
    [[stow-dotties.scripts]]
        priority = 0
        script = "bin/stow-dotties"
    [[stow-dotties.scripts]]
        priority = 1
        script = "bin/append-bash"

[ssh-key-to-gh]
    pre-req = "stow-dotties.scripts"
    [[ssh-key-to-gh.scripts]]
        priority = 0
        root = true
        script = "bin/ssh-key-setup"
    [[ssh-key-to-gh.scripts]]
        priority = 1
        # Should be on the path by now :)
        script = "ghak sierra-alpha ~/.ssh/id_rsa.pub"

[gitwatch-install]
    pre-req = "pull-repos.gitwatch"
    [[gitwatch-install.scripts]]
        script = "install -b ~/src/gitwatch/gitwatch.sh ~/bin/gitwatch"

# [configure-supervisor]
