#!/bin/bash

sudo apt-get update && sudo apt-get upgrade \
    && sudo apt-get install -y python3 python3-pip git

# Pip install kaianga eventually
sudo pip3 install pipenv pyscaffold
git clone https://github.com/sierra-alpha/kaianga-conf.git
mkdir kaianga
cd kaianga
virtualenv venv
. venv/bin/activate
git clone https://github.com/sierra-alpha/kaianga.git
cd kaianga/
python setup.py develop

python src/kaianga -c ~/kaianga-conf/kaianga.conf -i -l debug -u shaun

dir_bak="$(pwd)"
git clone https://github.com/sierra-alpha/kaianga-conf.git \
    || cd kaianga-conf && git pull && cd "$dir_bak" \
&& export PATH=\"$(python3 -m site --user-base)/bin:$PATH\" \
&& pip3 install -U -i https://test.pypi.org/simple kaianga \
&& kaianga -c ~/kaianga-conf/kaianga.conf -i -l debug -u shaun \
&& emacsclient -c -a emacs \
|| echo Failure, enter to exit && read ; bash"
